<!DOCTYPE html>
<html>
<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="themepresss">
    <title>发表文章</title>

    <link href="../../assets/css/index_Base.css" rel="stylesheet"/>
    <!--<link rel="stylesheet" type="text/css" href="../../assets/css/sweetalert.css"/>-->
    <link rel="stylesheet" type="text/css" href="../../assets/css/Maternal_port_css/public/essay.css"/>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet">

</head>
<body class="card-no-border">

<div class="page-wrapper">
    <!-- start preloader -->
    <div class="preloader">
        <div class="lds-ripple">
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- end preloader -->

    <!--头部-->
    <header id="header" class="site-header header-style-1 header-style-3">
        <div class="topbar">
            <div class="container">
                <div class="separator"></div>
                <div class="row">
                    <div class="col col-sm-3">
                        <div class="contact-info">
                            <ul>
                                <li><i class="ti-location-pin"></i>湛江市赤坎区教育路11号</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col col-sm-5">
                        <div class="contact-info">
                            <ul>
                                <li><i class="ti-mobile"></i>502015889@qq.com</li>
                                <li><i class="ti-email"></i>+ 0759 134 3364 8882</li>
                            </ul>
                        </div>
                    </div>
                    <!--登陆注册入口-->
                    <div class="col col-sm-4 hidden">
                        <div class="sign">
                            <ul>
                                <li><a href="signin.html" class="log">登陆</a></li>
                                <li><a href="register.html" class="log">注册</a></li>
                                <li id="doc_entry"><a href="#" class="log">医生入口</a></li>
                            </ul>
                        </div>
                    </div>
                    <!--登陆后显示-->
                    <div class="col col-sm-4 ">
                        <div class="admin">
                            <ul>
                                <li>
                                    <a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                        <img src="../../assets/images/heads.jpg" alt="" width="30px" height="30px"/>
                                        Komidori Li
                                        <span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-usermenu pull-right">
                                        <li><a href="../user/personal_center.html"> <i class="ti-user"></i> 个人中心 </a>
                                        </li>
                                        <li><a href="../reset_pwd.html"> <i class="ti-lock"></i> 更改密码</a></li>
                                        <li><a href="../user/personal_information.html"> <i class="ti-bag"></i> 我的信息
                                        </a></li>
                                        <hr/>
                                        <li><a href="../signin.html"> <i class="ti-close"></i> 退出登陆 </a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div> <!-- end container -->
        </div>
        <!-- end topbar -->

        <nav class="navigation navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="open-btn">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!--logo-->
                    <a class="navbar-brand" href="index.html"><img src="../../assets/images/l3.jpg" alt height="68px;"></a>
                </div>
                <!--导航条-->
                <div id="navbar" class="navbar-collapse collapse navbar-right navigation-holder">
                    <button class="close-navbar"><i class="ti-close"></i></button>
                    <ul class="nav navbar-nav">

                        <li class="menu-item-has-children">
                            <a href="../index.html">主页</a>

                        </li>

                        <li class="menu-item-has-children">
                            <a href="#">线上咨询服务</a>
                            <ul class="sub-menu">
                                <li><a href="../doctor/find_doctors.html">找医生</a></li>
                                <!--<li><a href="service-single.html">按科室寻找医生</a></li>-->
                            </ul>
                        </li>
                        <li class="menu-item-has-children">
                            <a href="#">线下预约服务</a>
                            <ul class="sub-menu">
                                <li><a href="../doctor/find_appointment_doc.html">预约私人医生</a></li>
                                <li><a href="../nurse/find_nurses.html">预约月嫂</a></li>
                            </ul>
                        </li>
                        <li class="menu-item-has-children">
                            <a href="#">经验交流社区</a>
                            <ul class="sub-menu">
                                <li><a href="../mom_public/expert_course.html">专家课程</a></li>
                                <li><a href="../expert/find_experts.html">找专家</a></li>
                                <li><a href="../mom_public/mom_public.html">妈妈交流社区</a></li>
                            </ul>
                        </li>

                        <li class="menu-item-has-children">
                            <a href="#">育儿工具</a>
                            <ul class="sub-menu">
                                <li><a href="../baby_tools/production_list.html">产检表</a></li>
                                <li><a href="../baby_tools/vaccine_list.html">疫苗接种</a></li>
                                <li><a href="../baby_tools/growth_prediction.html">胎儿发育测评</a></li>
                            </ul>
                        </li>

                        <li><a href="../about.html">关于我们</a></li>

                    </ul>
                </div><!-- end of nav-collapse -->
                <!--导航条//-->
                <!--搜索-->
                <div class="side-info">
                    <div class="header-search-form-wrapper">
                        <button class="search-toggle-btn"><i class="fi flaticon-search"></i></button>
                        <div class="header-search-form">
                            <form>
                                <div>
                                    <input type="text" class="form-control" placeholder="在此处搜索...">
                                    <button type="submit"><i class="fi flaticon-search"></i></button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!--搜索//-->
            </div><!-- end of container -->
        </nav>
    </header>

    <!--导航-->
    <div class="breadcumb-area">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="breadcumb-wrap text-center">
                        <h2>文章编辑</h2>
                        <!--导航-->
                        <ul>
                            <li><a href="../index.html">主页</a></li>
                            <li>经验社区</li>
                            <li><a href="mom_public.html">妈咪社区</a></li>
                            <li><span>文章编辑</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="blog-single-section section-padding">
        <div class="ab-svg_color">
            <svg x="0px" y="0px"
                 viewBox="0 0 1920 289" enable-background="new 0 0 1920 289" xml:space="preserve">
                <path fill="#fff" d="M959,169C582.541,169,240.253,104.804-14.125,0H0v289h1920V0h12.125C1677.747,104.804,1335.459,169,959,169
                    z"/>
               </svg>
        </div>
        <div class="container" id="app">
            <div class="essay">
                <!--<h3>发帖</h3>-->
                <form onsubmit="return false">

                    <!--作者-->
                    <div class="form-group">
                        <input id="author" class="" type="hidden" value=""/>
                    </div>

                    <!--标题-->
                    <div class="form-group">
                        <label for="title">标题</label>
                        <input v-model="essay.essayTitle" id="title" class="" type="text"/>
                    </div>
                    <!--分类-->
                    <div class="form-group">
                        <label for="type">分类</label>
                        <select v-model="essay.essayCategory" name="tyle" id="type">
                            <option value="7001" selected="selected">怀孕·生活</option>
                            <option value="7002">备孕·试管</option>
                            <option value="7003">产后·调理</option>
                            <option value="7004">育儿·经验</option>
                            <option value="7005">情感·谈天</option>
                            <option value="7006">早教·幼教</option>
                            <option value="7007">其他</option>
                        </select>
                    </div>
                    <!--是否公开-->
                    <div class="form-group">
                        <label for="private">隐私</label>
                        <input id="private" class="" type="radio" name="publish_type"/>
                        <label for="public">公开</label>
                        <input id="public" class="" type="radio" name="publish_type"/>
                    </div>
                    <!--编辑器-->
                    <div id="summernote"></div>
                    <!--提交-->
                    <input @click="editEssay" type="submit" class="btn btn-theme" value="发布"/>
                </form>
            </div>
        </div> <!-- end container -->


    </section>

    <!--页尾-->
    <div id="foot"></div>

</div>
</body>


<!-- All JavaScript files================================================== -->

<!--jquery-->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>

<!--bootstrap-->
<script src="https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>

<!-- Plugins for this template -->
<script src="../../assets/js/jquery-plugin-collection.js"></script>

<!-- Custom script for this template -->
<script src="../../assets/js/script.js"></script>

<!--滑动-->
<script src="../../assets/js/smoothscroll.js" type="text/javascript" charset="utf-8"></script>

<!--文本编辑器-->
<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script>
<script src="../../assets/js/summernote/summernote-zh-CN.js"></script>

<script src="../../assets/js/vue/vue.js"></script>
<script src="../../assets/js/GlobalVariables.js"></script>
<script src="../../assets/js/GlobalMethod.js"></script>
<!-- JS files end===========================================================-->
<script>
    function init() {
        $(function () {
            $("#foot").load("../low_footer.html");
        });

        //文本编辑
        $(document).ready(function () {
            $('#summernote').summernote();
        });
        $('#summernote').summernote({
            height: 300,                 // 定义编辑框高度
            minHeight: null,             // 定义编辑框最低的高度
            maxHeight: null,             // 定义编辑框最高德高度
            lang: 'zh-CN', focus: true,
            onInit: function () {
                $('.note-editor').attr({'data-error-prop': 'true', 'name': 'body'});
            },
            callbacks: {
                onImageUpload: function(files,editor,$editable) {
                    console.log(files)
                    $("#summernote").summernote('insertImage', "asdasdasd");
                }
            }

        });
    }

    function submitEssay() {
        app.essay.essayContent = $('#summernote').summernote('code');
        console.log(app.essay)
        $.ajax({
            url: "http://" + host + "/essay/maternal/maternalSubmitEssay",
            method: "post",
            data: JSON.stringify(app.essay),
            dataType: "json",
            contentType: "application/json;charset-UTF-8",
            xhrFields: {
                withCredentials: true  //带上cookie信息，解决sessionid不一致
            },
            success: function (result) {
                console.log(result)
                if (result.status == "200") {
                    alert("发布成功")
                    window.location.href = 'mom_public.html'
                }
            }
        });
    }


</script>
<script>
    let app = new Vue({
        el: "#app",
        data: {
            essay: {
                essayTitle: "",
                essayCategory: 7001,
                essayContent: "",
            },
        },
        methods: {
            editEssay() {
                submitEssay()
            }
        },
        mounted() {
            returnSignin()
            init()
        }
    })
</script>

</html>
