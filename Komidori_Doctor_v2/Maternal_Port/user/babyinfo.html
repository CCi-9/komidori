<!DOCTYPE html>
<html>
<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="themepresss">
    <title>宝宝信息</title>

    <link href="../../assets/css/index_Base.css" rel="stylesheet"/>
    <link href="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css"
          rel="stylesheet">
    <link href="../../assets/css/city/city-picker.css" rel="stylesheet"/>

</head>
<body class="card-no-border">

<div class="page-wrapper">
    <!--头部-->
    <header id="header" class="site-header header-style-1 header-style-3">
        <div class="topbar">
            <div class="container">
                <div class="separator"></div>
                <div class="row">
                    <div class="col col-sm-3">
                        <div class="contact-info">
                            <ul>
                                <li><i class="ti-location-pin"></i>湛江市赤坎区教育路11号</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col col-sm-5">
                        <div class="contact-info">
                            <ul>
                                <li><i class="ti-mobile"></i>502015889@qq.com</li>
                                <li><i class="ti-email"></i>+ 0759 134 3364 8882</li>
                            </ul>
                        </div>
                    </div>
                    <!--登陆注册入口-->
                    <div class="col col-sm-4 hidden">
                        <div class="sign">
                            <ul>
                                <li><a href="signin.html" class="log">登陆</a></li>
                                <li><a href="register.html" class="log">注册</a></li>
                                <li id="doc_entry"><a href="#" class="log">医生入口</a></li>
                            </ul>
                        </div>
                    </div>
                    <!--登陆后显示-->
                    <div class="col col-sm-4 ">
                        <div class="admin">
                            <ul>
                                <li>
                                    <a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                        <img src="../../assets/images/heads.jpg" alt="" width="30px" height="30px"/>
                                        Komidori Li
                                        <span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-usermenu pull-right">
                                        <li><a href="../user/personal_center.html"> <i class="ti-user"></i> 个人中心 </a>
                                        </li>
                                        <li><a href="../reset_pwd.html"> <i class="ti-lock"></i> 更改密码</a></li>
                                        <li><a href="../user/personal_information.html"> <i class="ti-bag"></i> 我的信息
                                        </a></li>
                                        <hr/>
                                        <li><a href="../signin.html"> <i class="ti-close"></i> 退出登陆 </a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div> <!-- end container -->
        </div>
        <!-- end topbar -->

        <nav class="navigation navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="open-btn">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!--logo-->
                    <a class="navbar-brand" href="index.html"><img src="../../assets/images/l3.jpg" alt height="68px;"></a>
                </div>
                <!--导航条-->
                <div id="navbar" class="navbar-collapse collapse navbar-right navigation-holder">
                    <button class="close-navbar"><i class="ti-close"></i></button>
                    <ul class="nav navbar-nav">

                        <li class="menu-item-has-children">
                            <a href="../index.html">主页</a>

                        </li>

                        <li class="menu-item-has-children">
                            <a href="#">线上咨询服务</a>
                            <ul class="sub-menu">
                                <li><a href="../doctor/find_doctors.html">找医生</a></li>
                                <!--<li><a href="service-single.html">按科室寻找医生</a></li>-->
                            </ul>
                        </li>
                        <li class="menu-item-has-children">
                            <a href="#">线下预约服务</a>
                            <ul class="sub-menu">
                                <li><a href="../doctor/find_appointment_doc.html">预约私人医生</a></li>
                                <li><a href="../nurse/find_nurses.html">预约月嫂</a></li>
                            </ul>
                        </li>
                        <li class="menu-item-has-children">
                            <a href="#">经验交流社区</a>
                            <ul class="sub-menu">
                                <li><a href="../mom_public/expert_course.html">专家课程</a></li>
                                <li><a href="../expert/find_experts.html">找专家</a></li>
                                <li><a href="../mom_public/mom_public.html">妈妈交流社区</a></li>
                            </ul>
                        </li>

                        <li class="menu-item-has-children">
                            <a href="#">育儿工具</a>
                            <ul class="sub-menu">
                                <li><a href="../baby_tools/production_list.html">产检表</a></li>
                                <li><a href="../baby_tools/vaccine_list.html">疫苗接种</a></li>
                                <li><a href="../baby_tools/growth_prediction.html">胎儿发育测评</a></li>
                            </ul>
                        </li>

                        <li><a href="../about.html">关于我们</a></li>

                    </ul>
                </div><!-- end of nav-collapse -->
                <!--导航条//-->
                <!--搜索-->
                <div class="side-info">
                    <div class="header-search-form-wrapper">
                        <button class="search-toggle-btn"><i class="fi flaticon-search"></i></button>
                        <div class="header-search-form">
                            <form>
                                <div>
                                    <input type="text" class="form-control" placeholder="在此处搜索...">
                                    <button type="submit"><i class="fi flaticon-search"></i></button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!--搜索//-->
            </div><!-- end of container -->
        </nav>
    </header>

    <!--头部结束-->
    <div class="preloader">
        <div class="lds-ripple">
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- end preloader -->

    <div id="personal">
        <!--个人信息-->
        <div class="container">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="row page-titles">
                <div class="col-md-12 align-self-center">
                    <!--<h3 class="text-themecolor">个人信息</h3>-->
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
                        <li class="breadcrumb-item"><a href="personal_center.html">个人中心</a></li>
                        <li class="breadcrumb-item"><a href="babylist.html">宝宝屋</a></li>
                        <li class="breadcrumb-item active">宝宝信息</li>
                        <!--<li class="breadcrumb-item"><a href="javascript:void(0)">宝宝状态</a></li>-->
                    </ol>
                </div>
                <!--<div class="col-md-7 align-self-center">
                    <a href="#" class="btn waves-effect waves-light btn btn-info pull-right hidden-sm-down"> Upgrade to Pro</a>
                </div>-->
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Start Page Content -->
            <!-- ============================================================== -->
            <!-- Row -->
            <div id="app" class="row">
                <!-- Column -->
                <div class="col-lg-4 col-xlg-3 col-md-5">
                    <div class="card">
                        <div class="card-body">
                            <center class="m-t-30"><img :src="baby.babyImg" class="img-circle"
                                                        width="150"/>
                                <h4 class="card-title m-t-10">{{babyName}}</h4>
                                <h6 class="card-subtitle">{{babySex}}<i class="ti-angle-right"></i>
                                    <span v-if="babyStatus == 1">出生</span>
                                    <span v-else>未出生</span>
                                </h6>
                                <div class="row text-center justify-content-md-center">
                                    <!--<div class="col-4"><a href="javascript:void(0)" class="link"><i class="icon-people"></i> <font class="font-medium">254</font></a></div>-->
                                    <!--<div class="col-4"><a href="javascript:void(0)" class="link"><i class="icon-picture"></i> <font class="font-medium">54</font></a></div>-->
                                </div>
                            </center>
                        </div>
                    </div>
                </div>

                <!-- Column -->
                <div class="col-lg-8 col-xlg-9 col-md-7">
                    <div class="card">
                        <!-- Tab panes -->
                        <div class="card-body">
                            <form class="form-horizontal form-material">

                                <div class="form-group">
                                    <label class="col-md-12" for="babyname">宝宝姓名</label>
                                    <div class="col-md-12">
                                        <input type="text" placeholder="用户名" v-model="baby.babyName"
                                               class="form-control form-control-line" id="babyname" name="babyname">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-12">宝宝状态</label>
                                    <div class="col-md-12">
                                        <label class="radio-inline">
                                            <input type="radio" name="baby_status" @click="getBabyStatus"
                                                   v-model="baby.babyStatus" value="1">
                                            出生
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="baby_status" @click="getBabyStatus"
                                                   v-model="baby.babyStatus" value="0">
                                            未出生
                                        </label>

                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-12">宝宝性别</label>
                                    <div class="col-md-12">
                                        <label class="radio-inline">
                                            <input type="radio" name="babysex" @click="getBabySex"
                                                   v-model="baby.babySex" value="小王子"> 小王子
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="babysex" @click="getBabySex"
                                                   v-model="baby.babySex" value="小公举"> 小公举
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="babysex" @click="getBabySex"
                                                   v-model="baby.babySex" value="未知"> 未知
                                        </label>

                                    </div>
                                </div>

                                <div class="form-group container">
                                    <label class="" for="babyage">宝宝年龄</label>
                                    <div class="input-group  col-md-5">
                                        <input type="number" placeholder="年龄/周期" v-model="baby.babyAge"
                                               class="form-control form-control-line" id="babyage" name="babyage">
                                        <span class="input-group-addon">周</span>
                                    </div>
                                </div>

                                <div class="form-group container">
                                    <label for="datetimepicker1">出生日期/预产期</label>
                                    <!--指定 date标记-->
                                    <div class='input-group date col-md-5' id='datetimepicker1' >
                                        <input :value="formatDate()" id='date1' class="form-control"/>

                                        <span class="input-group-addon">
							                    <i class="ti-time"></i>
							                </span>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label for="city" class="col-sm-12">现住城市: <span>{{city}}</span></label>
                                    <form class="">
                                        <div id="city" @click="getCity">
                                            <div class="col-sm-12" style="position: relative;">
                                                <input id="city-picker3" class="form-control form-control-line" readonly
                                                       placeholder="更改城市"
                                                       type="text" data-toggle="city-picker">
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <button onclick="updateBabyMsg()" class="btn btn-success">更新信息</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Column -->
            </div>
            <!-- Row -->
            <!-- ============================================================== -->
            <!-- End PAge Content -->
            <!-- ============================================================== -->
        </div>
    </div>

    <!--页尾-->
    <div id="foot"></div>

</div>
</body>


<!-- All JavaScript files================================================== -->

<!--jquery-->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>

<!--bootstrap-->
<script src="https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>

<!-- Plugins for this template -->
<script src="../../assets/js/jquery-plugin-collection.js"></script>

<!-- Custom script for this template -->
<script src="../../assets/js/script.js"></script>

<!--滑动-->
<script src="../../assets/js/smoothscroll.js"></script>

<!--城市选择-->
<script src="../../assets/js/city/city-picker.data.js"></script>
<script src="../../assets/js/city/city-picker.js"></script>

<!--时间(日期)段插件-->
<script src="https://cdn.bootcss.com/moment.js/2.24.0/moment-with-locales.js"></script>
<!--<script src="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>-->
<script src="../../assets/js/time/bootstrap-datepicker.min.js"></script>
<script src="../../assets/js/time/bootstrap-datepicker.zh-CN.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="../../assets/js/GlobalVariables.js"></script>
<script src="../../assets/js/GlobalMethod.js"></script>
<script src="../../assets/js/jquery.params.js"></script>
<!-- JS files end===========================================================-->
<script>
    //	$("#head").load("./user_head.html");

    $(function () {
        returnSignin()

        $("#foot").load("../low_footer.html");

        $('#date1').datepicker({
            locale: moment.locale('zh-CN'),
            format: 'yyyy-mm-dd',
            startDate: new Date(),
            todayHighlight: true,
            autoclose: true,
            endDate: "+10m",
        }).on('changeDate', function (e) {
            app.baby.babyBirth = e.target.value
        });
    });


</script>
<script>
    function getBaby() {
        let id = $.query.get("id")
        console.log(id)
        $.ajax({
            url: "http://" + host + "/maternal/baby/getBabyByID",
            method: "get",
            data: {
                babyID: id,
            },
            xhrFields: {
                withCredentials: true  //带上cookie信息，解决sessionid不一致
            },
            success: function (result) {
                console.log(result)
                app.baby = result.data
                app.babyName = app.baby.babyName
                app.babySex = app.baby.babySex
                app.city = app.baby.babyCity
                app.babyStatus = app.baby.babyStatus
            }
        });
    }

    function updateBabyMsg() {
        console.log(app.baby)

        $.ajax({
            url: "http://" + host + "/maternal/baby/updateBabyMsg",
            method: "put",
            data: JSON.stringify(app.baby),
            dataType: "json",
            contentType: "application/json;charset-UTF-8",
            xhrFields: {
                withCredentials: true  //带上cookie信息，解决sessionid不一致
            },
            success: function (result) {
                console.log(result)
                if (result.status == "200") {
                    alert("更改成功")
                    window.location.href = 'personal_center.html'
                }
            }
        });
    }
</script>
<script>
    let app = new Vue({
        el: "#app",
        data: {
            baby: {},
            babyName: "",
            babyStatus: 0,
            babySex: "",
            city: "",
        },
        methods: {
            getBabySex(obj) {
                this.baby.babySex = obj.target.value
            },
            getBabyStatus(obj) {
                this.baby.babyStatus = obj.target.value
            },
            formatDate() {
                let date = this.baby.babyBirth
                date = formatDate(date, "yyyy-MM-dd")
                return date
            },
            getCity() {
                this.baby.babyCity = $("#city-picker3").val()
            }
        },
        mounted() {
            getBaby()
        },
    })
</script>
</html>
